# é¡¹ç›®æ¦‚è§ˆ (PROJECT_OVERVIEW)

## é¡¹ç›®åŸºæœ¬ä¿¡æ¯
- **é¡¹ç›®åç§°**ï¼šEVERYDAYAIONE
- **é¡¹ç›®ç±»å‹**ï¼šAIå›¾ç‰‡/è§†é¢‘ç”Ÿæˆå¹³å°ï¼ˆWebåº”ç”¨ï¼‰
- **å¼€å‘è¯­è¨€**ï¼šPythonï¼ˆåç«¯ï¼‰+ TypeScript/Reactï¼ˆå‰ç«¯ï¼‰
- **ç‰ˆæœ¬**ï¼šåˆå§‹è®¾è®¡é˜¶æ®µ

## é¡¹ç›®æ¶æ„
- **æ¶æ„æ¨¡å¼**ï¼šå‰åç«¯åˆ†ç¦» + ä»»åŠ¡é˜Ÿåˆ— + äº‘æ•°æ®åº“
- **ä¸»è¦æŠ€æœ¯æ ˆ**ï¼š
  - **åç«¯**ï¼š
    - Python 3.x
    - FastAPIï¼ˆå¼‚æ­¥Webæ¡†æ¶ï¼‰
    - Supabaseï¼ˆPostgreSQLäº‘æ•°æ®åº“ + Realtimeï¼‰
    - Redis + Bullï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰
    - loguruï¼ˆæ—¥å¿—ç®¡ç†ï¼‰
    - tenacityï¼ˆé‡è¯•æœºåˆ¶ï¼‰
  - **å‰ç«¯**ï¼š
    - React + TypeScript
    - Zustandï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
    - TailwindCSSï¼ˆæ ·å¼ï¼‰
    - Supabase-jsï¼ˆæ•°æ®åº“å®¢æˆ·ç«¯ + å®æ—¶è®¢é˜…ï¼‰
  - **åŸºç¡€è®¾æ–½**ï¼š
    - **è®¡ç®—**ï¼šé˜¿é‡Œäº‘ECS 2æ ¸4GBï¼ˆMVPé˜¶æ®µï¼‰
    - **æ•°æ®åº“**ï¼šSupabaseå…è´¹ç‰ˆï¼ˆ500MB PostgreSQLï¼‰
    - **æ–‡ä»¶å­˜å‚¨**ï¼šé˜¿é‡Œäº‘OSSï¼ˆå›¾ç‰‡/è§†é¢‘å­˜å‚¨ + CDNï¼‰
    - **å®æ—¶é€šä¿¡**ï¼šSupabase Realtimeï¼ˆæ›¿ä»£Socket.ioï¼‰

## æ ¸å¿ƒåŠŸèƒ½
- **å¤šå¯¹è¯ç®¡ç†**ï¼šç”¨æˆ·å¯åˆ›å»ºå¤šä¸ªAIå¯¹è¯ï¼Œæ”¯æŒé‡å‘½åã€åˆ é™¤ã€æœç´¢
- **å¤šä»»åŠ¡å¹¶å‘**ï¼šå…¨å±€æœ€å¤š15ä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼Œå•å¯¹è¯æœ€å¤š5ä¸ªä»»åŠ¡
- **AIå†…å®¹ç”Ÿæˆ**ï¼šè°ƒç”¨å¤§æ¨¡å‹APIç”Ÿæˆå›¾ç‰‡å’Œè§†é¢‘
- **å®æ—¶è¿›åº¦è·Ÿè¸ª**ï¼šé€šè¿‡Supabase Realtimeå®æ—¶æ¨é€ä»»åŠ¡è¿›åº¦
- **ç§¯åˆ†ç³»ç»Ÿ**ï¼šæŒ‰ä»»åŠ¡æ¶ˆè€—ç§¯åˆ†ï¼Œå¤±è´¥è‡ªåŠ¨é€€å›
- **å›¾ç‰‡ç¼–è¾‘**ï¼šæ™ºèƒ½ç¼–è¾‘ã€åŒºåŸŸé‡ç»˜ã€æ‰©å›¾ã€æ“¦é™¤ã€å˜æ¸…æ™°ç­‰
- **ç”¨æˆ·ç®¡ç†**ï¼šæ³¨å†Œã€ç™»å½•ã€å¯†ç é‡ç½®ã€ä¸ªäººè®¾ç½®
- **ç®¡ç†å‘˜åå°**ï¼šç”¨æˆ·ç®¡ç†ã€ç§¯åˆ†å……å€¼ã€æ•°æ®ç»Ÿè®¡

## ç›®å½•ç»“æ„
```
EVERYDAYAIONE/
â”œâ”€â”€ .cursorrules              # AIå¼€å‘æ‰§è¡Œæ ¸å¿ƒè§„åˆ™
â”œâ”€â”€ CLAUDE.md                 # Claude Code å¼€å‘è§„åˆ™
â”œâ”€â”€ .env                      # ç¯å¢ƒå˜é‡ï¼ˆæœ¬åœ°ï¼‰
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ PROJECT_OVERVIEW.md       # é¡¹ç›®æ¦‚è§ˆï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”‚   â”œâ”€â”€ FUNCTION_INDEX.md         # å‡½æ•°ç´¢å¼•
â”‚   â”œâ”€â”€ CURRENT_ISSUES.md         # å½“å‰é—®é¢˜
â”‚   â”œâ”€â”€ API_REFERENCE.md          # API æ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ DATABASE_GUIDE.md     # æ•°æ®åº“ä½¿ç”¨æŒ‡å—
â”‚   â”‚   â”œâ”€â”€ MIGRATION_GUIDE.md    # è¿ç§»æŒ‡å—
â”‚   â”‚   â”œâ”€â”€ supabase_init.sql     # Supabase å»ºè¡¨è„šæœ¬ï¼ˆPostgreSQLï¼‰
â”‚   â”‚   â””â”€â”€ migrations/           # æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚   â”‚       â”œâ”€â”€ 001_add_image_url_to_messages.sql
â”‚   â”‚       â”œâ”€â”€ 002_add_video_url_to_messages.sql
â”‚   â”‚       â”œâ”€â”€ 003_change_model_id_to_varchar.sql
â”‚   â”‚       â”œâ”€â”€ 004_add_is_error_to_messages.sql
â”‚   â”‚       â”œâ”€â”€ 005_add_video_cost_enum.sql
â”‚   â”‚       â”œâ”€â”€ 006_add_tasks_table.sql
â”‚   â”‚       â””â”€â”€ 007_add_credit_transactions.sql
â”‚   â””â”€â”€ document/
â”‚       â”œâ”€â”€ TECH_ARCHITECTURE.md      # æŠ€æœ¯æ¶æ„
â”‚       â”œâ”€â”€ PAGE_DESIGN.md            # é¡µé¢è®¾è®¡
â”‚       â”œâ”€â”€ OSS_CDN_DESIGN.md         # OSS/CDN è®¾è®¡
â”‚       â”œâ”€â”€ KIE_INTEGRATION_DESIGN.md # KIE API é›†æˆè®¾è®¡
â”‚       â”œâ”€â”€ SUPER_ADMIN_FEATURES.md   # è¶…çº§ç®¡ç†å‘˜åŠŸèƒ½
â”‚       â”œâ”€â”€ TECH_CHAT_PAGE_FIX.md     # èŠå¤©é¡µä¿®å¤æŠ€æœ¯æ–¹æ¡ˆ
â”‚       â””â”€â”€ TEST_LAZY_LOADING.md      # æ‡’åŠ è½½æµ‹è¯•
â”‚
â”œâ”€â”€ backend/                  # åç«¯ä»£ç ï¼ˆPython/FastAPIï¼‰
â”‚   â”œâ”€â”€ venv/                      # Python è™šæ‹Ÿç¯å¢ƒï¼ˆgit å¿½ç•¥ï¼‰
â”‚   â”œâ”€â”€ requirements.txt          # Pythonä¾èµ–ï¼ˆç²¾ç¡®ç‰ˆæœ¬é”å®šï¼‰
â”‚   â”œâ”€â”€ .env                      # åç«¯ç¯å¢ƒå˜é‡ï¼ˆgit å¿½ç•¥ï¼‰
â”‚   â”œâ”€â”€ .env.example              # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â”œâ”€â”€ main.py                   # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config.py                 # é…ç½®ç®¡ç†ï¼ˆpydantic-settingsï¼‰
â”‚   â”‚   â”œâ”€â”€ database.py               # Supabase å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ security.py               # JWT/å¯†ç å¤„ç†
â”‚   â”‚   â”œâ”€â”€ exceptions.py             # è‡ªå®šä¹‰å¼‚å¸¸
â”‚   â”‚   â”œâ”€â”€ redis.py                  # Redis å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ limiter.py                # é¢‘ç‡é™åˆ¶å™¨
â”‚   â”œâ”€â”€ api/                      # API å±‚
â”‚   â”‚   â”œâ”€â”€ deps.py                   # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â””â”€â”€ routes/                   # è·¯ç”±æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ auth.py                   # è®¤è¯è·¯ç”±
â”‚   â”‚       â”œâ”€â”€ health.py                 # å¥åº·æ£€æŸ¥
â”‚   â”‚       â”œâ”€â”€ conversation.py           # å¯¹è¯è·¯ç”±
â”‚   â”‚       â”œâ”€â”€ message.py                # æ¶ˆæ¯è·¯ç”±
â”‚   â”‚       â”œâ”€â”€ image.py                  # å›¾åƒç”Ÿæˆè·¯ç”±
â”‚   â”‚       â””â”€â”€ video.py                  # è§†é¢‘ç”Ÿæˆè·¯ç”±
â”‚   â”œâ”€â”€ schemas/                  # è¯·æ±‚/å“åº”æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ auth.py                   # è®¤è¯ç›¸å…³ Schema
â”‚   â”‚   â”œâ”€â”€ conversation.py           # å¯¹è¯ç›¸å…³ Schema
â”‚   â”‚   â”œâ”€â”€ message.py                # æ¶ˆæ¯ç›¸å…³ Schema
â”‚   â”‚   â”œâ”€â”€ image.py                  # å›¾åƒç”Ÿæˆ Schema
â”‚   â”‚   â””â”€â”€ video.py                  # è§†é¢‘ç”Ÿæˆ Schema
â”‚   â”œâ”€â”€ services/                 # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ auth_service.py           # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ conversation_service.py   # å¯¹è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ message_service.py        # æ¶ˆæ¯æœåŠ¡ï¼ˆCRUDï¼‰
â”‚   â”‚   â”œâ”€â”€ message_stream_service.py # æµå¼æ¶ˆæ¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ message_utils.py          # æ¶ˆæ¯å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ message_ai_helpers.py     # AI è°ƒç”¨è¾…åŠ©å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ image_service.py          # å›¾åƒç”ŸæˆæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ video_service.py          # è§†é¢‘ç”ŸæˆæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ audio_service.py          # éŸ³é¢‘å¤„ç†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ storage_service.py        # æ–‡ä»¶å­˜å‚¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ sms_service.py            # çŸ­ä¿¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ credit_service.py         # ç§¯åˆ†æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ task_limit_service.py     # ä»»åŠ¡é™åˆ¶æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ base_generation_service.py # ç”ŸæˆæœåŠ¡åŸºç±»
â”‚   â”‚   â””â”€â”€ adapters/                 # AI æ¨¡å‹é€‚é…å™¨
â”‚   â”‚       â””â”€â”€ kie/                      # KIE API é€‚é…å™¨
â”‚   â”‚           â”œâ”€â”€ client.py                 # HTTP å®¢æˆ·ç«¯
â”‚   â”‚           â”œâ”€â”€ models.py                 # æ•°æ®æ¨¡å‹
â”‚   â”‚           â”œâ”€â”€ chat_adapter.py           # èŠå¤©é€‚é…å™¨
â”‚   â”‚           â”œâ”€â”€ image_adapter.py          # å›¾ç‰‡ç”Ÿæˆé€‚é…å™¨
â”‚   â”‚           â””â”€â”€ video_adapter.py          # è§†é¢‘ç”Ÿæˆé€‚é…å™¨
â”‚   â””â”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ kie_models.py             # KIE æ¨¡å‹é…ç½®
â”‚
â””â”€â”€ frontend/                 # å‰ç«¯ä»£ç ï¼ˆReact/TypeScriptï¼‰
    â”œâ”€â”€ package.json              # å‰ç«¯ä¾èµ–
    â”œâ”€â”€ vite.config.ts            # Vite é…ç½®
    â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
    â”œâ”€â”€ index.html                # å…¥å£ HTML
    â””â”€â”€ src/
        â”œâ”€â”€ main.tsx                  # åº”ç”¨å…¥å£
        â”œâ”€â”€ App.tsx                   # æ ¹ç»„ä»¶ï¼ˆè·¯ç”±é…ç½®ï¼‰
        â”œâ”€â”€ index.css                 # å…¨å±€æ ·å¼ï¼ˆTailwindCSSï¼‰
        â”œâ”€â”€ pages/                    # é¡µé¢ç»„ä»¶
        â”‚   â”œâ”€â”€ Home.tsx                  # é¦–é¡µï¼ˆå«è®¤è¯å¼¹çª—å…¥å£ï¼‰
        â”‚   â”œâ”€â”€ ForgotPassword.tsx        # å¿˜è®°å¯†ç é¡µ
        â”‚   â””â”€â”€ Chat.tsx                  # èŠå¤©é¡µï¼ˆä¸»åŠŸèƒ½é¡µï¼‰
        â”œâ”€â”€ components/               # ç»„ä»¶
        â”‚   â”œâ”€â”€ common/                   # é€šç”¨ç»„ä»¶
        â”‚   â”‚   â””â”€â”€ Modal.tsx                 # é€šç”¨å¼¹çª—ç»„ä»¶ï¼ˆåŠ¨ç”»ã€ESCå…³é—­ã€é®ç½©å±‚ï¼‰
        â”‚   â”œâ”€â”€ auth/                     # è®¤è¯ç›¸å…³ç»„ä»¶
        â”‚   â”‚   â”œâ”€â”€ AuthModal.tsx             # è®¤è¯å¼¹çª—å®¹å™¨ï¼ˆç™»å½•/æ³¨å†Œåˆ‡æ¢ï¼‰
        â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx             # ç™»å½•è¡¨å•ï¼ˆå¯†ç /éªŒè¯ç åŒæ¨¡å¼ï¼‰
        â”‚   â”‚   â”œâ”€â”€ RegisterForm.tsx          # æ³¨å†Œè¡¨å•ï¼ˆæ‰‹æœºå·+éªŒè¯ç ï¼‰
        â”‚   â”‚   â””â”€â”€ ProtectedRoute.tsx        # è·¯ç”±å®ˆå«ç»„ä»¶
        â”‚   â””â”€â”€ chat/                     # èŠå¤©ç›¸å…³ç»„ä»¶
        â”‚       â”œâ”€â”€ Sidebar.tsx               # å·¦ä¾§æ ï¼ˆå¯¹è¯åˆ—è¡¨ã€ç”¨æˆ·èœå•ï¼‰
        â”‚       â”œâ”€â”€ ConversationList.tsx      # å¯¹è¯åˆ—è¡¨ï¼ˆæŒ‰æ—¥æœŸåˆ†ç»„ï¼Œ302è¡Œï¼‰
        â”‚       â”œâ”€â”€ ConversationItem.tsx      # å¯¹è¯é¡¹ç»„ä»¶
        â”‚       â”œâ”€â”€ ContextMenu.tsx           # å³é”®èœå•ç»„ä»¶
        â”‚       â”œâ”€â”€ DeleteConfirmModal.tsx    # å¯¹è¯åˆ é™¤ç¡®è®¤å¼¹æ¡†
        â”‚       â”œâ”€â”€ conversationUtils.ts      # å¯¹è¯åˆ—è¡¨å·¥å…·å‡½æ•°
        â”‚       â”œâ”€â”€ MessageArea.tsx           # æ¶ˆæ¯åŒºåŸŸ
        â”‚       â”œâ”€â”€ MessageItem.tsx           # å•æ¡æ¶ˆæ¯ï¼ˆç»„åˆå­ç»„ä»¶ï¼‰
        â”‚       â”œâ”€â”€ MessageMedia.tsx          # æ¶ˆæ¯åª’ä½“æ¸²æŸ“ï¼ˆå›¾ç‰‡ã€è§†é¢‘ï¼‰
        â”‚       â”œâ”€â”€ MessageActions.tsx        # æ¶ˆæ¯æ“ä½œå·¥å…·æ 
        â”‚       â”œâ”€â”€ MessageToolbar.tsx        # æ¶ˆæ¯å·¥å…·æ ï¼ˆæ—§ç‰ˆï¼Œå¾…åˆ é™¤ï¼‰
        â”‚       â”œâ”€â”€ InputArea.tsx             # è¾“å…¥åŒºåŸŸï¼ˆç»„åˆ InputControls å’Œå·¥å…·æ ï¼‰
        â”‚       â”œâ”€â”€ InputControls.tsx         # è¾“å…¥æ§åˆ¶ï¼ˆæ–‡æœ¬æ¡†ã€æŒ‰é’®ã€ä¸Šä¼ ï¼‰
        â”‚       â”œâ”€â”€ ModelSelector.tsx         # æ¨¡å‹é€‰æ‹©å™¨
        â”‚       â”œâ”€â”€ AdvancedSettingsMenu.tsx  # é«˜çº§è®¾ç½®èœå•ï¼ˆå›¾åƒ/è§†é¢‘/æ¨ç†å‚æ•°ï¼‰
        â”‚       â”œâ”€â”€ SettingsModal.tsx         # ä¸ªäººè®¾ç½®å¼¹æ¡†
        â”‚       â”œâ”€â”€ UploadMenu.tsx            # ä¸Šä¼ èœå•
        â”‚       â”œâ”€â”€ ImagePreview.tsx          # å›¾ç‰‡é¢„è§ˆï¼ˆè¾“å…¥åŒºå°å›¾ï¼‰
        â”‚       â”œâ”€â”€ ImagePreviewModal.tsx     # å›¾ç‰‡é¢„è§ˆå¼¹çª—ï¼ˆå…¨å±ç¼©æ”¾ä¸‹è½½ï¼‰
        â”‚       â”œâ”€â”€ LoadingPlaceholder.tsx    # ç»Ÿä¸€åŠ è½½å ä½ç¬¦ï¼ˆæ–‡å­— + è·³åŠ¨åœ†ç‚¹ï¼‰
        â”‚       â”œâ”€â”€ MediaPlaceholder.tsx      # ç»Ÿä¸€åª’ä½“å ä½ç¬¦ï¼ˆç°è‰²æ¡† + å›¾æ ‡ï¼‰
        â”‚       â”œâ”€â”€ AudioPreview.tsx          # éŸ³é¢‘é¢„è§ˆ
        â”‚       â”œâ”€â”€ AudioRecorder.tsx         # å½•éŸ³ç»„ä»¶
        â”‚       â”œâ”€â”€ ConflictAlert.tsx         # æ¨¡å‹å†²çªæç¤º
        â”‚       â”œâ”€â”€ EmptyState.tsx            # ç©ºçŠ¶æ€æç¤º
        â”‚       â”œâ”€â”€ LoadingSkeleton.tsx       # åŠ è½½éª¨æ¶å±
        â”‚       â””â”€â”€ DeleteMessageModal.tsx    # åˆ é™¤æ¶ˆæ¯ç¡®è®¤å¼¹æ¡†
        â”œâ”€â”€ stores/                   # çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰
        â”‚   â”œâ”€â”€ useAuthStore.ts           # è®¤è¯çŠ¶æ€ï¼ˆç”¨æˆ·ä¿¡æ¯ã€Tokenï¼‰
        â”‚   â”œâ”€â”€ useAuthModalStore.ts      # è®¤è¯å¼¹çª—çŠ¶æ€ï¼ˆå¼€å…³ã€æ¨¡å¼åˆ‡æ¢ï¼‰
        â”‚   â”œâ”€â”€ useChatStore.ts           # èŠå¤©çŠ¶æ€ï¼ˆæ¶ˆæ¯ç¼“å­˜ï¼‰
        â”‚   â”œâ”€â”€ useTaskStore.ts           # ä»»åŠ¡çŠ¶æ€ï¼ˆå…¨å±€ä»»åŠ¡é˜Ÿåˆ—ï¼‰
        â”‚   â””â”€â”€ useConversationRuntimeStore.ts # å¯¹è¯è¿è¡Œæ—¶çŠ¶æ€
        â”œâ”€â”€ services/                 # API è°ƒç”¨
        â”‚   â”œâ”€â”€ api.ts                    # Axios é…ç½®
        â”‚   â”œâ”€â”€ auth.ts                   # è®¤è¯ API
        â”‚   â”œâ”€â”€ conversation.ts           # å¯¹è¯ API
        â”‚   â”œâ”€â”€ message.ts                # æ¶ˆæ¯ API
        â”‚   â”œâ”€â”€ image.ts                  # å›¾åƒç”Ÿæˆ API
        â”‚   â”œâ”€â”€ video.ts                  # è§†é¢‘ç”Ÿæˆ API
        â”‚   â””â”€â”€ messageSender/            # ç»Ÿä¸€æ¶ˆæ¯å‘é€æ¨¡å—
        â”‚       â”œâ”€â”€ index.ts                  # ç»Ÿä¸€å…¥å£ï¼ˆsendMessageï¼‰
        â”‚       â”œâ”€â”€ types.ts                  # ç±»å‹å®šä¹‰
        â”‚       â”œâ”€â”€ chatSender.ts             # èŠå¤©æ¶ˆæ¯å‘é€å™¨
        â”‚       â”œâ”€â”€ mediaSender.ts            # ç»Ÿä¸€åª’ä½“æ¶ˆæ¯å‘é€å™¨ï¼ˆå›¾ç‰‡/è§†é¢‘åˆå¹¶ï¼‰
        â”‚       â””â”€â”€ mediaGenerationCore.ts    # åª’ä½“ç”Ÿæˆæ ¸å¿ƒé€»è¾‘ï¼ˆAPI+è½®è¯¢ï¼‰
        â”œâ”€â”€ types/                    # TypeScript ç±»å‹
        â”‚   â”œâ”€â”€ auth.ts                   # è®¤è¯ç›¸å…³ç±»å‹
        â”‚   â”œâ”€â”€ message.ts                # æ¶ˆæ¯ç›¸å…³ç±»å‹
        â”‚   â””â”€â”€ task.ts                   # ä»»åŠ¡ç›¸å…³ç±»å‹ï¼ˆå…±äº«ç±»å‹ï¼šStoreTaskStatusã€StoreTaskTypeã€CompletedNotificationï¼‰
        â”œâ”€â”€ hooks/                    # è‡ªå®šä¹‰ Hooks
        â”‚   â”œâ”€â”€ useImageUpload.ts         # å›¾ç‰‡ä¸Šä¼ é€»è¾‘
        â”‚   â”œâ”€â”€ useAudioRecording.ts      # å½•éŸ³é€»è¾‘
        â”‚   â”œâ”€â”€ useDragDropUpload.ts      # æ‹–æ‹½ä¸Šä¼ é€»è¾‘
        â”‚   â”œâ”€â”€ useMessageLoader.ts       # æ¶ˆæ¯åŠ è½½é€»è¾‘ï¼ˆå«ç¼“å­˜ï¼‰
        â”‚   â”œâ”€â”€ useMessageHandlers.ts     # æ¶ˆæ¯å‘é€å¤„ç†é€»è¾‘ï¼ˆç»„åˆå™¨ï¼‰
        â”‚   â”œâ”€â”€ useRegenerateHandlers.ts  # æ¶ˆæ¯é‡æ–°ç”Ÿæˆé€»è¾‘
        â”‚   â”œâ”€â”€ useModelSelection.ts      # æ¨¡å‹é€‰æ‹©é€»è¾‘ï¼ˆå«ç”¨æˆ·é€‰æ‹©ä¿æŠ¤ï¼‰
        â”‚   â”œâ”€â”€ useVirtuaScroll.ts        # Virtua æ»šåŠ¨ç®¡ç†ï¼ˆç»Ÿä¸€å…¥å£ï¼‰
        â”‚   â”œâ”€â”€ useUnifiedMessages.ts     # ç»Ÿä¸€æ¶ˆæ¯è¯»å–ï¼ˆåˆå¹¶æŒä¹…åŒ–+ä¸´æ—¶æ¶ˆæ¯ï¼‰
        â”‚   â”œâ”€â”€ useClickOutside.ts        # ç‚¹å‡»å¤–éƒ¨å…³é—­é€»è¾‘
        â”‚   â””â”€â”€ handlers/                 # æ¶ˆæ¯å¤„ç†å™¨å­æ¨¡å—
        â”‚       â”œâ”€â”€ useTextMessageHandler.ts   # æ–‡æœ¬æ¶ˆæ¯å¤„ç†
        â”‚       â”œâ”€â”€ useMediaMessageHandler.ts  # ç»Ÿä¸€åª’ä½“æ¶ˆæ¯å¤„ç†ï¼ˆå›¾ç‰‡/è§†é¢‘ï¼‰
        â”‚       â””â”€â”€ mediaHandlerUtils.ts       # åª’ä½“å¤„ç†å·¥å…·å‡½æ•°
        â”œâ”€â”€ constants/                # å¸¸é‡é…ç½®
        â”‚   â”œâ”€â”€ models.ts                 # æ¨¡å‹é…ç½®ï¼ˆUnifiedModelï¼‰
        â”‚   â””â”€â”€ placeholder.ts            # å ä½ç¬¦å¸¸é‡ï¼ˆPLACEHOLDER_TEXTï¼‰
        â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°
            â”œâ”€â”€ settingsStorage.ts        # ç”¨æˆ·è®¾ç½®å­˜å‚¨
            â”œâ”€â”€ modelConflict.ts          # æ¨¡å‹å†²çªæ£€æµ‹
            â”œâ”€â”€ messageFactory.ts         # æ¶ˆæ¯å·¥å‚å‡½æ•°
            â”œâ”€â”€ mergeOptimisticMessages.ts # åˆå¹¶ä¹è§‚æ›´æ–°æ¶ˆæ¯ï¼ˆå»é‡é€»è¾‘ï¼‰
            â”œâ”€â”€ imageUtils.ts             # å›¾ç‰‡URLå·¥å…·ï¼ˆparseImageUrlsã€getFirstImageUrlï¼‰
            â”œâ”€â”€ logger.ts                 # ç»Ÿä¸€æ—¥å¿—å·¥å…·ï¼ˆerrorã€warnã€debugã€infoï¼‰
            â”œâ”€â”€ taskNotification.ts       # ä»»åŠ¡é€šçŸ¥å·¥å…·ï¼ˆnotifyTaskCompleteçº¯å‡½æ•°ï¼‰
            â”œâ”€â”€ taskCoordinator.ts        # ä»»åŠ¡åè°ƒå™¨ï¼ˆé˜²å¤šæ ‡ç­¾é¡µé‡å¤è½®è¯¢ï¼‰
            â”œâ”€â”€ polling.ts                # è½®è¯¢ç±»å‹å®šä¹‰ï¼ˆä»…ç±»å‹ï¼Œå®ç°åœ¨useTaskStoreï¼‰
            â”œâ”€â”€ mediaRegeneration.ts      # åª’ä½“é‡æ–°ç”Ÿæˆå·¥å…·å‡½æ•°
            â””â”€â”€ regenerate/               # é‡æ–°ç”Ÿæˆé€»è¾‘
                â”œâ”€â”€ index.ts              # ç»Ÿä¸€å…¥å£ï¼ˆregenerateMessageï¼‰
                â”œâ”€â”€ regenerateInPlace.ts  # å¤±è´¥æ¶ˆæ¯åŸåœ°é‡æ–°ç”Ÿæˆ
                â”œâ”€â”€ regenerateAsNew.ts    # æˆåŠŸæ¶ˆæ¯æ–°å¢å¯¹è¯
                â””â”€â”€ strategies/           # ç±»å‹ç­–ç•¥
                    â”œâ”€â”€ chatStrategy.ts   # èŠå¤©é‡æ–°ç”Ÿæˆç­–ç•¥
                    â”œâ”€â”€ imageStrategy.ts  # å›¾ç‰‡é‡æ–°ç”Ÿæˆç­–ç•¥
                    â””â”€â”€ videoStrategy.ts  # è§†é¢‘é‡æ–°ç”Ÿæˆç­–ç•¥
â”‚
â””â”€â”€ tests/                    # å•å…ƒæµ‹è¯•
    â”œâ”€â”€ __init__.py               # æµ‹è¯•æ¨¡å—æ ‡è¯†
    â”œâ”€â”€ conftest.py               # pytest fixturesï¼ˆmock å¯¹è±¡ï¼‰
    â”œâ”€â”€ test_auth_service.py      # è®¤è¯æœåŠ¡æµ‹è¯•ï¼ˆ12ä¸ªç”¨ä¾‹ï¼‰
    â”œâ”€â”€ test_conversation_service.py  # å¯¹è¯æœåŠ¡æµ‹è¯•ï¼ˆ11ä¸ªç”¨ä¾‹ï¼‰
    â””â”€â”€ test_message_service.py   # æ¶ˆæ¯æœåŠ¡æµ‹è¯•ï¼ˆ12ä¸ªç”¨ä¾‹ï¼‰
```

## å¼€å‘è§„èŒƒ
- éµå¾ª `.cursorrules` ä¸­å®šä¹‰çš„æ‰€æœ‰è§„åˆ™
- ä»£ç è´¨é‡åº•çº¿ï¼šæ–‡ä»¶â‰¤500è¡Œã€å‡½æ•°â‰¤120è¡Œã€åœˆå¤æ‚åº¦â‰¤15ã€åµŒå¥—â‰¤4å±‚
- æ‰€æœ‰ä¾èµ–å¿…é¡»ä½¿ç”¨ç²¾ç¡®ç‰ˆæœ¬å·ï¼ˆ==ï¼‰
- é”™è¯¯å¤„ç†ï¼štry-except + loguruï¼Œæ—¥å¿—éœ€åŒ…å«ä¸šåŠ¡ä¸Šä¸‹æ–‡
- å¼‚æ­¥ä¼˜å…ˆï¼šè€—æ—¶æ“ä½œå¿…é¡»å¼‚æ­¥å®ç°
- å¹¶å‘é™åˆ¶ï¼šå…¨å±€15ä¸ªä»»åŠ¡ï¼Œå•å¯¹è¯5ä¸ªä»»åŠ¡

## æ ¸å¿ƒæ¶æ„è®¾è®¡

### å¤šä»»åŠ¡å¹¶å‘æ¶æ„
- **å¹¶å‘æ¨¡å‹**ï¼šå…¨å±€å¹¶è¡Œï¼Œå…è®¸å¤šä¸ªå¯¹è¯åŒæ—¶æ‰§è¡Œä»»åŠ¡
- **é™æµç­–ç•¥**ï¼šä¸‰å±‚é˜²æŠ¤ï¼ˆå‰ç«¯ã€åç«¯æ¥å£ã€ç§¯åˆ†ç³»ç»Ÿï¼‰
- **è¶…æ—¶ç­–ç•¥**ï¼šHTTP 60ç§’è¶…æ—¶ï¼Œä»»åŠ¡æ— å¼ºåˆ¶è¶…æ—¶ï¼Œä»…å¤§æ¨¡å‹è¿”å›å¤±è´¥æ—¶åˆ¤å®š
- **ç§¯åˆ†é”å®š**ï¼šæäº¤æ—¶é”å®šï¼ŒæˆåŠŸæ‰£é™¤ï¼Œå¤±è´¥/è¶…æ—¶å…¨é¢é€€å›
- **å®æ—¶é€šä¿¡**ï¼šSupabase Realtimeç›‘å¬æ•°æ®åº“å˜åŒ–ï¼Œè‡ªåŠ¨æ¨é€ä»»åŠ¡è¿›åº¦
- **æ–­çº¿é‡è¿**ï¼šå‰ç«¯é‡è¿åè‡ªåŠ¨æ‹‰å–æ´»è·ƒä»»åŠ¡å¹¶æ¢å¤è®¢é˜…

### æ•°æ®å­˜å‚¨æ¶æ„
- **ç»“æ„åŒ–æ•°æ®**ï¼šSupabase PostgreSQLï¼ˆç”¨æˆ·ã€å¯¹è¯ã€æ¶ˆæ¯ã€ä»»åŠ¡ã€ç§¯åˆ†è®°å½•ï¼‰
- **æ–‡ä»¶å­˜å‚¨**ï¼šé˜¿é‡Œäº‘OSSï¼ˆå›¾ç‰‡ã€è§†é¢‘ï¼‰
  - å‰ç«¯ç›´ä¼ OSSï¼ˆä½¿ç”¨STSä¸´æ—¶å‡­è¯ï¼‰
  - ç”ŸæˆURLåä¿å­˜åˆ°Supabase
  - CDNåŠ é€Ÿè®¿é—®
- **ç¼“å­˜å±‚**ï¼šRedisï¼ˆä»»åŠ¡é˜Ÿåˆ—ã€é¢‘ç‡é™åˆ¶ï¼‰

### AI æ¨¡å‹æ¥å…¥æ¶æ„
- **æ¨¡å‹æ¥æº**ï¼š
  - KIE ä»£ç†ï¼šä»·æ ¼ä½ 70-85%ï¼Œç»Ÿä¸€ OpenAI å…¼å®¹æ¥å£
  - Google å®˜æ–¹ APIï¼šæœ‰å…è´¹é¢åº¦ï¼ˆå¾…å¼€å‘ï¼‰
- **æ¨¡å‹ç±»å‹**ï¼š
  - Chatï¼šGemini 3 Pro/Flashï¼ˆKIEï¼‰ï¼ŒGemini 2.5/3 Flash Previewï¼ˆGoogle å¾…å¼€å‘ï¼‰
  - Imageï¼šNano Banana ç³»åˆ—ï¼ˆKIEï¼‰
  - Videoï¼šSora 2 ç³»åˆ—ï¼ˆKIEï¼‰
- **è°ƒç”¨æ¨¡å¼**ï¼š
  - Chatï¼šåŒæ­¥æµå¼ï¼ˆSSEï¼‰
  - Image/Videoï¼šå¼‚æ­¥ä»»åŠ¡ï¼ˆåˆ›å»ºä»»åŠ¡ â†’ è½®è¯¢çŠ¶æ€ï¼‰
- **æˆæœ¬æ§åˆ¶**ï¼šé¢„æ‰£è´¹æœºåˆ¶ï¼ˆLock â†’ Execute â†’ Settleï¼‰
- **è¯¦ç»† API æ–‡æ¡£**ï¼šè§ `API_REFERENCE.md`

### UIå±•ç¤ºè§„èŒƒ
- **å¯¹è¯åˆ—è¡¨å¾½ç« **ï¼šğŸ”„æ˜¾ç¤ºè¿›è¡Œä¸­ä»»åŠ¡æ•°ï¼Œâœ…æ˜¾ç¤ºå·²å®ŒæˆæœªæŸ¥çœ‹ä»»åŠ¡æ•°
- **æ¶ˆæ¯æ°”æ³¡çŠ¶æ€**ï¼šè¿›åº¦æ¡å±•ç¤ºä»»åŠ¡è¿›åº¦ï¼Œæ˜ç¡®æç¤ºå¤±è´¥åŸå› 
- **æ¶ˆæ¯å·¥å…·æ **ï¼šå¤åˆ¶ã€ä¸‹è½½ã€ç¼–è¾‘ã€åˆ é™¤ï¼ˆåˆ é™¤æ‚¬åœæ˜¾ç¤ºï¼‰
- **åˆ†å±æ¨¡å¼**ï¼šå·¦ä¾§40%å¯¹è¯åŒºï¼Œå³ä¾§60%å›¾ç‰‡æŸ¥çœ‹å™¨

---

## å¾…å¼€å‘åŠŸèƒ½è§„åˆ’

### ä¸€ã€Google å®˜æ–¹ Gemini API é€‚é…å™¨
- **ä¼˜å…ˆçº§**ï¼šä¸­
- **ç±»å‹**ï¼šæ–°å¢åŠŸèƒ½ï¼ˆçº§åˆ« Aï¼‰
- **ç›®æ ‡**ï¼šæ¥å…¥ Google å®˜æ–¹ APIï¼ˆæœ‰å…è´¹é¢åº¦ï¼‰ï¼Œæ”¯æŒ `Gemini 2.5 Flash Preview` å’Œ `Gemini 3 Flash Preview`

**æ–‡ä»¶æ¸…å•**ï¼š
| æ–‡ä»¶ | æ“ä½œ | è¯´æ˜ |
|------|------|------|
| `requirements.txt` | ä¿®æ”¹ | è¿½åŠ  `google-genai==x.x.x` |
| `backend/services/adapters/google/__init__.py` | æ–°å»º | åŒ…åˆå§‹åŒ–å’Œå¯¼å‡º |
| `backend/services/adapters/google/client.py` | æ–°å»º | Google API å®¢æˆ·ç«¯å°è£… |
| `backend/services/adapters/google/chat_adapter.py` | æ–°å»º | èŠå¤©é€‚é…å™¨ |

**æŠ€æœ¯è¦ç‚¹**ï¼š
- SDKï¼š`google-genai`
- ç¯å¢ƒå˜é‡ï¼š`GEMINI_API_KEY` æˆ– `GOOGLE_API_KEY`
- æ¥å£é£æ ¼ï¼šä¸ç°æœ‰ `KieChatAdapter` å¯¹é½
- æ”¯æŒæµå¼/éæµå¼è¾“å‡ºã€å¤šè½®å¯¹è¯

**å®˜æ–¹æ–‡æ¡£**ï¼š
- API Keyï¼šhttps://ai.google.dev/gemini-api/docs/api-key
- SDKï¼šhttps://ai.google.dev/gemini-api/docs/libraries
- å¤šè½®å¯¹è¯ï¼šhttps://ai.google.dev/gemini-api/docs/interactions

---

### äºŒã€KIE Gemini è°ƒç”¨ä¼˜åŒ–ï¼ˆGemini 3 æ–°ç‰¹æ€§é€‚é…ï¼‰
- **ä¼˜å…ˆçº§**ï¼šä¸­
- **ç±»å‹**ï¼šåŠŸèƒ½å¢å¼ºï¼ˆçº§åˆ« Aï¼‰
- **ç›®æ ‡**ï¼šåˆ©ç”¨ Gemini 3 æ–°ç‰¹æ€§æå‡ Chat å’Œå›¾åƒç”Ÿæˆçš„å‡†ç¡®åº¦

**å‚è€ƒæ–‡æ¡£**ï¼š
- Gemini 3 æŒ‡å—ï¼šhttps://ai.google.dev/gemini-api/docs/gemini-3?hl=zh-cn
- å›¾åƒç”ŸæˆæŒ‡å—ï¼šhttps://ai.google.dev/gemini-api/docs/image-generation?hl=zh-cn
- æ–‡æœ¬ç”ŸæˆæŒ‡å—ï¼šhttps://ai.google.dev/gemini-api/docs/text-generation?hl=zh-cn
- å‡½æ•°è°ƒç”¨æŒ‡å—ï¼šhttps://ai.google.dev/gemini-api/docs/function-calling?hl=zh-cn

**ä¼˜åŒ–é¡¹ä¸€ï¼šChat å‡†ç¡®åº¦æå‡**

| ä¼˜åŒ–é¡¹ | å½“å‰çŠ¶æ€ | ç›®æ ‡çŠ¶æ€ | å½±å“æ–‡ä»¶ |
|--------|---------|---------|---------|
| `thinking_level` å‚æ•° | ä»… `LOW/HIGH` | æ”¯æŒ `minimal/low/medium/high` | `models.py`, `chat_adapter.py` |
| `temperature` æ§åˆ¶ | æ—  | é»˜è®¤ `1.0`ï¼ˆå®˜æ–¹å¼ºçƒˆæ¨èï¼‰ | `chat_adapter.py` |
| `media_resolution` å‚æ•° | æ—  | å›¾åƒ `high`(1120 tokens)ã€PDF `medium`(560 tokens)ã€è§†é¢‘ `low`(70 tokens/å¸§) | `models.py`, `chat_adapter.py` |
| Thought Signatures | æœªå¤„ç† | å¤šè½®å¯¹è¯/å‡½æ•°è°ƒç”¨ä¿ç•™åŠ å¯†æ¨ç†è¡¨ç¤º | `chat_adapter.py`, `client.py` |
| ç»“æ„åŒ–è¾“å‡º | æœªæ”¯æŒ | `response_mime_type` + `response_json_schema` | `models.py`, `chat_adapter.py` |

**ä¼˜åŒ–é¡¹äºŒï¼šå›¾åƒç”Ÿæˆå‡†ç¡®åº¦æå‡**

| ä¼˜åŒ–é¡¹ | å½“å‰çŠ¶æ€ | ç›®æ ‡çŠ¶æ€ | å½±å“æ–‡ä»¶ |
|--------|---------|---------|---------|
| Google Search æ¥åœ° | æœªå¯ç”¨ | `tools=[{"google_search": {}}]` åŸºäºå®æ—¶æ•°æ®ç”Ÿæˆ | `image_adapter.py` |
| å¤šå‚è€ƒå›¾ç‰‡ | æœ€å¤š 8 å¼  | æœ€å¤š 14 å¼ ï¼ˆ6 ç‰©ä½“ + 5 äººç‰©ï¼‰ | `image_adapter.py`, `models.py` |
| å¤šè½®å¯¹è¯è¿­ä»£ | å•æ¬¡ç”Ÿæˆ | ä½¿ç”¨ `chat.send_message()` æ¸è¿›å¼ä¼˜åŒ– | `image_adapter.py` |

**ä¼˜åŒ–é¡¹ä¸‰ï¼šå‡½æ•°è°ƒç”¨æœ€ä½³å®è·µ**

| ä¼˜åŒ–é¡¹ | å½“å‰çŠ¶æ€ | ç›®æ ‡çŠ¶æ€ |
|--------|---------|---------|
| å‡½æ•°æ•°é‡ | æœªé™åˆ¶ | æ§åˆ¶åœ¨ 10-20 ä¸ªä»¥å†… |
| è°ƒç”¨æ¨¡å¼ | æœªé…ç½® | æ”¯æŒ `AUTO/ANY/NONE/VALIDATED` |
| å¹¶è¡Œè°ƒç”¨ | æœªæ”¯æŒ | å•å“åº”å¯è¿”å›å¤šä¸ªå‡½æ•°è°ƒç”¨ |
| temperature | é»˜è®¤ | å‡½æ•°è°ƒç”¨åœºæ™¯è®¾ä¸º `0` |

**æ–‡ä»¶æ¸…å•**ï¼š
| æ–‡ä»¶ | æ“ä½œ | è¯´æ˜ |
|------|------|------|
| `backend/services/adapters/kie/models.py` | ä¿®æ”¹ | æ·»åŠ  `ThinkingLevel`ã€`MediaResolution` æšä¸¾ï¼Œæ›´æ–°è¯·æ±‚æ¨¡å‹ |
| `backend/services/adapters/kie/chat_adapter.py` | ä¿®æ”¹ | æ”¯æŒæ–°å‚æ•°ï¼Œå¤„ç† Thought Signatures |
| `backend/services/adapters/kie/image_adapter.py` | ä¿®æ”¹ | æ”¯æŒ Google Searchã€å¤šå‚è€ƒå›¾ç‰‡ã€å¤šè½®å¯¹è¯ |
| `backend/services/adapters/kie/client.py` | ä¿®æ”¹ | å¤„ç† Thought Signatures çš„ä¼ é€’å’Œä¿ç•™ |

**ä»£ç ç¤ºä¾‹å‚è€ƒ**ï¼š

```python
# Chat - æ¨ç†æ·±åº¦æ§åˆ¶
class ThinkingLevel(str, Enum):
    MINIMAL = "minimal"  # Flash ä¸“ç”¨
    LOW = "low"
    MEDIUM = "medium"    # Flash ä¸“ç”¨
    HIGH = "high"        # é»˜è®¤

# Chat - åª’ä½“åˆ†è¾¨ç‡æ§åˆ¶
class MediaResolution(str, Enum):
    LOW = "low"      # 70 tokens/å¸§ï¼Œé€‚åˆè§†é¢‘
    MEDIUM = "medium"  # 560 tokensï¼Œé€‚åˆ PDF
    HIGH = "high"    # 1120 tokensï¼Œé€‚åˆå›¾åƒ

# å›¾åƒç”Ÿæˆ - Google Search æ¥åœ°
response = client.models.generate_content(
    model="gemini-3-pro-image-preview",
    contents=prompt,
    config=types.GenerateContentConfig(
        response_modalities=['TEXT', 'IMAGE'],
        tools=[{"google_search": {}}]
    )
)

# å›¾åƒç”Ÿæˆ - å¤šè½®å¯¹è¯è¿­ä»£
chat = client.chats.create(
    model="gemini-3-pro-image-preview",
    config=types.GenerateContentConfig(
        response_modalities=['TEXT', 'IMAGE'],
    )
)
response = chat.send_message("ç”Ÿæˆä¸€å¼ ...")
response = chat.send_message("æŠŠèƒŒæ™¯æ”¹æˆ...")  # è¿­ä»£ä¼˜åŒ–
```

---

### ä¸‰ã€KIE æˆæœ¬ä¼˜åŒ–åŠŸèƒ½
- **ä¼˜å…ˆçº§**ï¼šä½
- **ç±»å‹**ï¼šåŠŸèƒ½å¢å¼ºï¼ˆçº§åˆ« Aï¼‰
- **ç›®æ ‡**ï¼šé™ä½ API è°ƒç”¨æˆæœ¬

**å‚è€ƒæ–‡æ¡£**ï¼š
- ä¸Šä¸‹æ–‡ç¼“å­˜ï¼šhttps://ai.google.dev/gemini-api/docs/caching?hl=zh-cn
- æ‰¹é‡ APIï¼šhttps://ai.google.dev/gemini-api/docs/batch-api?hl=zh-cn
- Files APIï¼šhttps://ai.google.dev/gemini-api/docs/files?hl=zh-cn
- é•¿ä¸Šä¸‹æ–‡ï¼šhttps://ai.google.dev/gemini-api/docs/long-context?hl=zh-cn

**ä¼˜åŒ–é¡¹ä¸€ï¼šä¸Šä¸‹æ–‡ç¼“å­˜ï¼ˆContext Cachingï¼‰**

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| åŠŸèƒ½ | ç¼“å­˜é‡å¤ä½¿ç”¨çš„å†…å®¹ï¼ˆç³»ç»ŸæŒ‡ä»¤ã€å‚è€ƒå›¾ã€æ–‡æ¡£ï¼‰ |
| æ”¶ç›Š | è¾“å…¥è´¹ç”¨é™ä½ **4 å€** |
| æœ€ä½é˜ˆå€¼ | Gemini 3 Flash: 1024 tokens / Gemini 3 Pro: 4096 tokens |
| æœ‰æ•ˆæœŸ | å¯é…ç½® TTLï¼Œé»˜è®¤ 48 å°æ—¶ |

**é€‚ç”¨åœºæ™¯**ï¼š
- å›ºå®šç³»ç»ŸæŒ‡ä»¤çš„ Chat
- é‡å¤åˆ†æåŒä¸€æ‰¹å‚è€ƒå›¾
- å¤§å‹æ–‡æ¡£çš„å¤šæ¬¡æŸ¥è¯¢

**ä»£ç ç¤ºä¾‹**ï¼š
```python
cache = client.caches.create(
    model=model,
    config=types.CreateCachedContentConfig(
        system_instruction='æŒ‡ä»¤å†…å®¹',
        contents=[file_object],
        ttl="300s"
    )
)
```

**ä¼˜åŒ–é¡¹äºŒï¼šæ‰¹é‡ APIï¼ˆBatch APIï¼‰**

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| åŠŸèƒ½ | å¼‚æ­¥æ‰¹é‡å¤„ç†è¯·æ±‚ |
| æ”¶ç›Š | ä»·æ ¼ä¸ºæ ‡å‡†è´¹ç”¨çš„ **50%** |
| é™åˆ¶ | 24 å°æ—¶å†…å¤„ç†å®Œæˆ |
| æ ¼å¼ | å†…åµŒè¯·æ±‚ï¼ˆâ‰¤20MBï¼‰æˆ– JSONL æ–‡ä»¶ï¼ˆâ‰¤2GBï¼‰ |

**é€‚ç”¨åœºæ™¯**ï¼š
- æ‰¹é‡å›¾åƒç”Ÿæˆï¼ˆéå®æ—¶ï¼‰
- æ•°æ®é¢„å¤„ç†ã€å†…å®¹å®¡æ ¸
- ç¦»çº¿è¯„ä¼°ä»»åŠ¡

**ä¼˜åŒ–é¡¹ä¸‰ï¼šFiles API**

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| åŠŸèƒ½ | ä¸Šä¼ å¤§æ–‡ä»¶ä¾›å¤šæ¬¡ä½¿ç”¨ |
| é™åˆ¶ | å•æ–‡ä»¶ 2GBï¼Œé¡¹ç›®æ€»é‡ 20GBï¼Œä¿ç•™ 48 å°æ—¶ |
| æ”¶ç›Š | å‡å°‘é‡å¤ä¸Šä¼ å¸¦å®½ï¼Œé™ä½å»¶è¿Ÿ |

**é€‚ç”¨åœºæ™¯**ï¼š
- å¤§å‹ PDF æ–‡æ¡£åˆ†æ
- è§†é¢‘ç†è§£ï¼ˆä¸Šä¼ åå¤šæ¬¡æŸ¥è¯¢ï¼‰
- å‚è€ƒå›¾ç‰‡åº“ï¼ˆä¸Šä¼ åå¤ç”¨ï¼‰

**ä¼˜åŒ–é¡¹å››ï¼šé•¿ä¸Šä¸‹æ–‡æœ€ä½³å®è·µ**

| ä¼˜åŒ–é¡¹ | è¯´æ˜ |
|--------|------|
| æŸ¥è¯¢ä½ç½® | å°†é—®é¢˜æ”¾åœ¨ prompt **æœ«å°¾**ï¼Œæ•ˆæœæ›´å¥½ |
| æˆæœ¬ä¼˜åŒ– | ç»“åˆä¸Šä¸‹æ–‡ç¼“å­˜ä½¿ç”¨ |
| å‡†ç¡®ç‡ | å•æŸ¥è¯¢å¯è¾¾ 99%ï¼Œå¤šä¿¡æ¯æ£€ç´¢ä¼šä¸‹é™ |

---

## æ›´æ–°è®°å½•

- **2026-02-03**ï¼šæ»šåŠ¨ç³»ç»Ÿä» Virtuoso è¿ç§»åˆ° Virtua
  - ä½¿ç”¨ `useVirtuaScroll.ts` ç»Ÿä¸€å…¥å£ï¼Œåˆ é™¤æ—§çš„ `useVirtuosoScroll.ts`
  - ç§»é™¤ `react-virtuoso` ä¾èµ–ï¼Œæ”¹ç”¨æ›´è½»é‡çš„ `virtua`ï¼ˆ~3KBï¼‰
  - æ›´å¥½çš„åŠ¨æ€é«˜åº¦æ”¯æŒï¼Œè§£å†³æ¶ˆæ¯é—ªçƒé—®é¢˜
- **2026-02-02**ï¼šå®ŒæˆèŠå¤©ç³»ç»Ÿç»¼åˆé‡æ„é˜¶æ®µ5-7ï¼ˆçŠ¶æ€ç®¡ç†é‡è®¾è®¡ã€å ä½ç¬¦æŒä¹…åŒ–ã€æ€§èƒ½ä¼˜åŒ–ï¼‰
  - æ¶ˆæ¯åˆå¹¶ç®—æ³•ä¼˜åŒ– O(nÂ²) â†’ O(n)ï¼Œå›¾ç‰‡åŠ è½½å¤±è´¥é‡è¯•æœºåˆ¶
- **2026-02-01**ï¼šå®ŒæˆèŠå¤©ç³»ç»Ÿç»¼åˆé‡æ„é˜¶æ®µ0-4ï¼ˆ34/35ä»»åŠ¡ï¼Œ97%è¿›åº¦ï¼‰
  - ç»Ÿä¸€æ¶ˆæ¯å‘é€æ¶æ„ï¼ˆmediaSenderã€mediaGenerationCoreï¼‰
  - ç»Ÿä¸€ç¼“å­˜å†™å…¥ï¼ˆsetMessages å…¼å®¹å±‚ï¼‰
  - ç»Ÿä¸€å ä½ç¬¦ç»„ä»¶ï¼ˆLoadingPlaceholderã€MediaPlaceholderï¼‰
- **2026-01-31**ï¼šå®Œæˆç™»å½•/æ³¨å†Œå¼¹çª—åŒ–é‡æ„ï¼ˆModalã€AuthModalã€LoginFormã€RegisterFormï¼‰
- **2026-01-24**ï¼šå®Œæˆè§†é¢‘ç”ŸæˆåŠŸèƒ½é›†æˆï¼ˆSora 2 ç³»åˆ— 3 ä¸ªæ¨¡å‹ï¼‰
- **2026-01-21**ï¼šå®ŒæˆåŸºç¡€æ¶æ„æ­å»ºï¼ˆFastAPI + React + Supabaseï¼‰
